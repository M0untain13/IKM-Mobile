# Итоговое контрольное мероприятие по дисциплине "Технологии разработки приложений для мобильных платформ"

Тема ИКМ: мобильное приложение для ведения учета объема выполненных дорожно-строительных работ. Суть заключается в том, что есть сотрудники, которые составляют план выполнения работ (на проект, на месяц, на смену) и есть сотрудники, которые уже на месте выполнения работ заполняют фактический объем выполненных работ за смену с фотофиксацией.

## 1. Описать свои уточнения и предположения

* Учет объема выполненых работ будет вестись на основе планируемого и фактического кол-ва денежных средств, затарченных на проект.
* Главная сущность - проект, которая содержит перечень работ.
* Работы из проекта можно разбить на месяца, работы из каждого месяца можно разбить на смены.
* Есть два вида планируемых объёмов: базовый и скорректированный.
* Базовый план заполняется до начала работ по проекту. После начала проекта, базовый план замораживается.
* Скорректированный план заполняется во время выполнения работ по проекту.
* План заполняется как для проекта, так и для месяца и смены.
* Факт заполняется только для смены. Факт для месяца и проекта суммируется из сменного факта.
* При заполнении фактического объема затраченных средств за смену обязательно прикрепляется фотофиксация выполненых работ.

## 2. Документ с первоначальными требованиями
[Ссылка](./BRD.md)

## 3. Портреты пользователей (3-4)
[Ссылка](./Portraits.md)

## 4. Пользовательские сценарии (2 для примера)
[Ссылка](./Scenario.md)

## 5. Общая архитектура мобильного приложения в широком смысле

Многослойная архитектура:
1. Frontend
- Общая сводка
    React Native приложение, которое будет обрабатывать пользовательский ввод, хранить сессионные данные (даже в оффлайн) и при наличии интернета синхронизировать данные с бекендом. В основном обращается к API бекенда для выполнения каких-либо функций (сихнронизация данных, отчетность и т.д.).
- Модули
    Планирование работ - календарь, карты, формы.
    Фотофиксация - камера + геотеги + timestamp.
    Оффлайн-режим - SQLite + синхронизация.
    Дашборды - графики, отчеты.
2. Backend
- Общая сводка
    ASP.Net сервис, который будет предоставлять API для выполнения различных функций (CRUD операции с объектами, формирование отчетов, авторизация).
- Модули
    User Service – управление пользователями.
    Planning Service – работа с планами.
    Reporting Service – генерация отчетов.
    Media Service – хранение фото/видео.
    Auth Service - авторизация.
3. Database
- Общая сводка
    Для хранения данных - PostgreSQL. 
    Для хранения фото - S3 VK Cloud.

## 6. Список экранов, функционал экранов, логика переходов

- Главный экран
    На главном экране есть панель навигации с пунктами: проекты, месячные планы, сменные планы. При нажатии на пункт навигации открывается ListView соответсвующего объекта.
- ListView Проектов
    Перечень всех проектов. Есть кнопки "создать проект", "удалить проект", "открыть проект". При нажатии на кнопку "открыть проект" открывается DetailView проекта.
- DetailView Проекта
    Поля объекта и перечисление работ этого проекта. Есть кнопки "создать работу", "удалить работу", "открыть работу", "сохранить проект", "посчитать факт". При открытии работы открывается DetailView работы. При нажатии "посчитать факт" суммируется факт из всех работ проекта.
- ListView Месячных планов
    Перечень всех месячных планов за все года. Есть кнопки создать, удалить и открыть план. При нажатии на кнопку "Открыть", открывается DetailView месячного плана.
- DetailView Месячного плана
    Поля объекта, перечисление сменных планов этого месяца и перечисление работ этого месяца. Есть кнопки создать\удалить\открыть сменный план, добавить\удалить работу, сохранить месячный план, посчитать факт. При открытии сменного плана открывается его DetailView. При нажатии "посчитать факт" суммируется факт из всех сменных планов месяца.
- ListView Сменных планов
    Перечень всех сменных планов. Есть кнопки создать, удалить, открыть план.
- DetailView Сменного плана
    Поля объекта, перечень работ смены. Есть кнопки добавить\удалить работу, посчитать факт. При нажатии "посчитать факт" суммируется факт из всех работ смены.
- DetailView Работы
    Поля объекта.

## 7. Схема БД мобильного приложения в узком смысле
[Ссылка](./Schema.md)

## 8. Перечень библиотек, которые будут использоваться для разработки (что из react native, expo будет использоваться)

expo-sqlite – SQLite для структурированного хранения данных локально, если нет интернета.
axios – HTTP-клиент для запросов к API.
@react-native-community/netinfo – проверка подключения к интернету.
react-native-gantt-chart - диаграмма Ганта для отображения графика.
react-native-data-table – для табличного представления.
victory-native – для графиков (столбчатые, круговые и т.д.).
expo-image-picker – выбор фото из галереи или камеры.
react-native-image-resizer – сжатие фото перед загрузкой.
react-navigation (или expo-router) – навигация между экранами.
react-native-calendars – выбор дат для планов.
native-base / react-native-paper – UI-кит для форм, кнопок и т.д.

## 9. Структура каталогов проектов, перечень реакт компонентов, которые требуется разработать
RoadPlanApp/  
├── assets/                 # Статические ресурсы (шрифты, иконки, стили) 
│   ├── fonts/ 
│   ├── images/
│   └── styles/
├── src/
│   ├── api/
│   │   ├── api.js          # Axios-конфигурация 
│   │   ├── sync.js         # Логика синхронизации (оффлайн → онлайн) 
│   │   └── endpoints.js    # URL-эндпоинты бекенда 
│   │
│   ├── components/         # UI-компоненты:
│   │   ├── charts/         # Графики (Ганта, отчеты)  
│   │   ├── forms/          # Формы ввода
│   │   ├── ui/             # Кнопки, карточки и т. д.  
│   │   └── ...  
│   │
│   ├── constants/          # Константы 
│   ├── context/            # React Context
│   ├── db/
│   │   ├── models/         # Модели данных
│   │   ├── schema.ts       # Схема локально БД 
│   │   └── queries.ts      # SQL-запросы
│   │
│   ├── hooks/              # Кастомные хуки  
│   │
│   └── app/
│       ├── _layout.tsx
│       ├── index.tsx
│       └── pages/                               # Страницы:
│           ├── auth.tsx                         # Авторизация
│           ├── projectListView.tsx              # Перечень всех проектов
│           ├── projectDetailView/[id].tsx       # Детальное представление проекта
│           ├── montlyPlanListView.tsx           # Перечень всех месячных планов
│           ├── montlyPlanDetailView/[id].tsx    # Детальное представление месячного плана
│           ├── dailyPlanListView.tsx            # Перечень всех смен
│           ├── dailyPlanDetailView/[id].tsx     # Детальное представление смены
│           └── workDetailView/[id].tsx          # Детальное представление работы
│
├── .env 
├── app.json
└── package.json  

## 10. План работ
[Ссылка](./Plan.md)
